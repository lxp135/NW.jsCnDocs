<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <meta name="author" content="刘小平">
  <link rel="shortcut icon" href="../../../img/favicon.ico">
  <title>0.12升级0.13 - NW.js 最新版中文文档</title>
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../../../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css">
  
  <script>
    // Current page data
    var mkdocs_page_name = "0.12\u5347\u7ea70.13";
    var mkdocs_page_input_path = "For Users\\Migration\\From 0.12 to 0.13.md";
    var mkdocs_page_url = "/For Users/Migration/From 0.12 to 0.13/";
  </script>
  
  <script src="../../../js/jquery-2.1.1.min.js" defer></script>
  <script src="../../../js/modernizr-2.8.3.min.js" defer></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script> 
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href="../../.." class="icon icon-home"> NW.js 最新版中文文档</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
	<ul class="current">
	  
          
            <li class="toctree-l1">
		
    <a class="" href="../../..">首页</a>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">用户手册</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../Getting Started/">快速开始</a>
                </li>
                <li class="">
                    
    <a class="" href="../../Debugging with DevTools/">使用DevTools调试</a>
                </li>
                <li class="">
                    
    <a class="" href="../../Package and Distribute/">打包与发布</a>
                </li>
                <li class="">
                    
    <a class="" href="../../FAQ/">FAQ</a>
                </li>
                <li class=" current">
                    
    <span class="caption-text">合并版本</span>
    <ul class="subnav">
                <li class="toctree-l3 current">
                    
    <a class="current" href="./">0.12升级0.13</a>
    <ul class="subnav">
            
    <li class="toctree-l4"><a href="#migrate-from-012-to-013-doctitle">Migrate from 0.12 to 0.13 {: doctitle}</a></li>
    
        <ul>
        
            <li><a class="toctree-l5" href="#architecture-changes">Architecture Changes</a></li>
        
            <li><a class="toctree-l5" href="#nodejs-changes">Node.js Changes</a></li>
        
            <li><a class="toctree-l5" href="#api-changes">API Changes</a></li>
        
        </ul>
    

    </ul>
                </li>
    </ul>
                </li>
                <li class="">
                    
    <span class="caption-text">进阶</span>
    <ul class="subnav">
                <li class="toctree-l3">
                    
    <a class="" href="../../Advanced/Build Flavors/">编译特性</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../Advanced/Content Verification/">内容验证</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../Advanced/Customize Menubar/">Customize Menubar</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../Advanced/JavaScript Contexts in NW.js/">JavaScript Contexts in NW.js</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../Advanced/Protect JavaScript Source Code/">Protect JavaScript Source Code</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../Advanced/Security in NW.js/">Security in NW.js</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../Advanced/Support for Mac App Store/">Support for Mac App Store</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../Advanced/Test with ChromeDriver/">Test with ChromeDriver</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../Advanced/Transparent Window/">Transparent Window</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../Advanced/Use Flash Plugin/">Use Flash Plugin</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../Advanced/Use NaCl in NW.js/">Use NaCl in NW.js</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../Advanced/Use Native Node Modules/">Use Native Node Modules</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../Advanced/Autoupdates/">Autoupdates</a>
                </li>
    </ul>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">参考资料</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../../References/App/">App</a>
                </li>
                <li class="">
                    
    <a class="" href="../../../References/Changes to DOM/">Changes to DOM</a>
                </li>
                <li class="">
                    
    <a class="" href="../../../References/Changes to Node/">Changes to Node</a>
                </li>
                <li class="">
                    
    <a class="" href="../../../References/Clipboard/">Clipboard</a>
                </li>
                <li class="">
                    
    <a class="" href="../../../References/Command Line Options/">Command Line Options</a>
                </li>
                <li class="">
                    
    <a class="" href="../../../References/Chrome Extension APIs/">Chrome Extension APIs</a>
                </li>
                <li class="">
                    
    <a class="" href="../../../References/Manifest Format/">Manifest Format</a>
                </li>
                <li class="">
                    
    <a class="" href="../../../References/Menu/">Menu</a>
                </li>
                <li class="">
                    
    <a class="" href="../../../References/MenuItem/">MenuItem</a>
                </li>
                <li class="">
                    
    <a class="" href="../../../References/Screen/">Screen</a>
                </li>
                <li class="">
                    
    <a class="" href="../../../References/Shell/">Shell</a>
                </li>
                <li class="">
                    
    <a class="" href="../../../References/Shortcut/">Shortcut</a>
                </li>
                <li class="">
                    
    <a class="" href="../../../References/Tray/">Tray</a>
                </li>
                <li class="">
                    
    <a class="" href="../../../References/webview Tag/">webview Tag</a>
                </li>
                <li class="">
                    
    <a class="" href="../../../References/Window/">Window</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">开发者手册</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../../For Developers/Building NW.js/">Building NW.js</a>
                </li>
                <li class="">
                    
    <a class="" href="../../../For Developers/Contributing to NW.js/">Contributing to NW.js</a>
                </li>
                <li class="">
                    
    <a class="" href="../../../For Developers/Enable Proprietary Codecs/">Enable Proprietary Codecs</a>
                </li>
                <li class="">
                    
    <a class="" href="../../../For Developers/Repositories/">Repositories</a>
                </li>
                <li class="">
                    
    <a class="" href="../../../For Developers/Understanding Crash Dump/">Understanding Crash Dump</a>
                </li>
                <li class="">
                    
    <a class="" href="../../../For Developers/Writing Documents for NW.js/">Writing Documents for NW.js</a>
                </li>
                <li class="">
                    
    <a class="" href="../../../For Developers/Writing Test Cases for NW.js/">Writing Test Cases for NW.js</a>
                </li>
                <li class="">
                    
    <a class="" href="../../../For Developers/Contributors of Documents/">Contributors of Documents</a>
                </li>
    </ul>
	    </li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../../..">NW.js 最新版中文文档</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../..">Docs</a> &raquo;</li>
    
      
        
          <li>合并版本 &raquo;</li>
        
      
        
          <li>用户手册 &raquo;</li>
        
      
    
    <li>0.12升级0.13</li>
    <li class="wy-breadcrumbs-aside">
      
        <a href="https://github.com/lxp135/NW.jsCnDocs/edit/master/docs/For Users/Migration/From 0.12 to 0.13.md"
          class="icon icon-github"> Edit on GitHub</a>
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h1 id="migrate-from-012-to-013-doctitle">Migrate from 0.12 to 0.13 {: doctitle}</h1>
<hr />
<div class="toc">
<ul>
<li><a href="#migrate-from-012-to-013-doctitle">Migrate from 0.12 to 0.13 {: doctitle}</a><ul>
<li><a href="#architecture-changes">Architecture Changes</a></li>
<li><a href="#nodejs-changes">Node.js Changes</a></li>
<li><a href="#api-changes">API Changes</a><ul>
<li><a href="#build-flavors">Build Flavors</a></li>
<li><a href="#shorcut">Shorcut</a></li>
<li><a href="#menu">Menu</a></li>
<li><a href="#manifest-format">Manifest Format</a></li>
<li><a href="#window">Window</a></li>
<li><a href="#screen">Screen</a></li>
<li><a href="#known-issues">Known issues</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<h2 id="architecture-changes">Architecture Changes</h2>
<ul>
<li>NW.js application is running as a Chrome App internally. All chrome.* platform APIs and features can be used in NW application now. The default protocol is changed from <code>file://</code> to <code>chrome-extension://</code>, where the host part of the URL is the generated id. The <code>app://</code> protocol in 0.12 is replaced by <code>chrome-extension://</code> protocol.</li>
<li>All NW specific APIs, including <code>require()</code> is moved into a <code>nw</code> object from the <code>nw.gui</code> library. However, we provided a builtin wrapper library to provide compatibility for 0.12 apps. You can use <code>nw.gui</code> library for some time before we deprecate it in 0.14 or later.</li>
<li>The Node.js context is put in the DOM context of the background page, which is shared between opening windows as in 0.12 and before. The difference is you have access to all DOM features and chrome.* platform APIs in the Node context in 0.13.</li>
<li>To debug Node.js modules, you have to open DevTools for background page in Separate Context Mode by default. See <a href="../../Debugging with DevTools/">Debugging with DevTools</a> for details.</li>
<li>The entry of the application is either JS or HTML as in 0.12, but as the application is internally a Chrome App, the first window is supposed to be launched by JS from the background page. If you specify a HTML file as the entry with &ldquo;main&rdquo; field in package.json, NW will use a default JS to open the first window and load it.</li>
<li>If NW.js is running under <a href="../../Advanced/JavaScript Contexts in NW.js/#mixed-context-mode">Mixed Context Mode</a> (boot NW.js with <code>--mixed-context</code> argument), <code>nw.*</code> is kind of mirror of <code>window.*</code>. In this mode, you <strong>CANNOT</strong> share variables among frames or windows by assigning it to Node context. So do <strong>NOT</strong> turn on Mixed Context mode if your application is heavily depending on this variable sharing feature.</li>
</ul>
<h2 id="nodejs-changes">Node.js Changes</h2>
<ul>
<li>Node.js is bumped to 6.x in latest build. Check your NPM modules to make sure they support Node.js 6.x <strong>especially for native modules</strong>. There is <a href="https://github.com/nodejs/node/issues/2798">a list of native modules</a> which should be migrated to latest <a href="https://github.com/nodejs/nan">NaN 2</a>.</li>
<li>Add NW version information to process.versions[<code>nw</code>]. process.versions[<code>node-webkit</code>] will be deprecated later.</li>
</ul>
<h2 id="api-changes">API Changes</h2>
<h3 id="build-flavors">Build Flavors</h3>
<ul>
<li>Different build flavors support different set of APIs and capabilities. See <a href="../../Advanced/Build Flavors/">Build Flavors</a> to choose the right NW.js flavor or <a href="../../../For Developers/Building NW.js/">build your own</a>.</li>
</ul>
<h3 id="shorcut">Shorcut</h3>
<ul>
<li><code>Shortcut</code> API does <strong>NOT</strong> map <kbd>Ctrl</kbd> modifier to <kbd>&#8984;</kbd> on Mac OS X. However 0.13.0 supports <code>Command</code> modifier in cross platform way. So it&rsquo;s your responsible to detect the OS and choose the right modifier when registering hotkeys. See <a href="../../../References/Shortcut/#shortcutkey">Shortcut.key</a> for details.</li>
</ul>
<h3 id="menu">Menu</h3>
<ul>
<li>Menus on Mac is created with default menubar, including <code>app-name</code>, <code>Edit</code> and <code>Window</code>, instead of minimal menubar in 0.12.</li>
<li>To fix the name of application menu, you will need to modify  <code>nwjs.app/Contents/Resources/en.lproj/InfoPlist.strings</code> instead of <code>nwjs.app/Contents/Info.plist</code>. See <a href="../../Advanced/Customize Menubar/#mac-os-x">Customize Menubar</a>.</li>
</ul>
<h3 id="manifest-format">Manifest Format</h3>
<ul>
<li><a href="../../../References/Manifest Format/#single-instance"><code>single-instance</code></a> is <strong>deprecated</strong> and it&rsquo;s always <code>true</code>. You <strong>CANNOT</strong> have multiple instances for your app unless you&rsquo;re using different user data directory (by <code>--user-data-dir</code>). You may also want to use the <a href="../../../References/App/#event-openargs">open event</a>: the first instance will be notified with this event when user tries to launch the second instance.</li>
<li><a href="../../../References/Manifest Format/#toolbar"><code>toolbar</code></a> is <strong>deprecated</strong> and it&rsquo;s always <code>false</code>. The traditional toolbar will <strong>NOT</strong> be supported including the reload buttons, location bar and DevTools buttons. As a workaround, you can open / close DevTools with <kbd>F12</kbd> (Windows &amp; Linux) or <kbd>&#8984;</kbd>+<kbd>&#8997;</kbd>+<kbd>i</kbd> (Mac). And use <a href="../../../References/Window/#winreload"><code>win.reload()</code></a> and <a href="../../../References/Window/#winreloaddev"><code>win.reloadDev()</code></a> to simulate the reload buttons.</li>
<li><a href="../../../References/Manifest Format/#no-edit-menu-mac"><code>no-edit-menu</code></a> is <strong>deprecated</strong>.</li>
<li><code>snapshot</code> is <strong>deprecated</strong>. Use <a href="../../../References/Window/#winevalnwbinframe-path"><code>win.evalNWBin()</code></a> instead.</li>
<li>The format of <a href="../../../References/Manifest Format/#node-remote"><code>node-remote</code></a> is changed to array of <a href="https://developer.chrome.com/extensions/match_patterns">match patterns</a> used by Chrome extension.</li>
<li>Window options <code>always-on-top</code>, <code>visible-on-all-workspaces</code>, <code>new-instance</code>, <code>inject-js-start</code> and <code>inject-js-end</code> is renamed to <a href="../../../References/Manifest Format/#always_on_top"><code>always_on_top</code></a>, <a href="../../../References/Manifest Format/#visible_on_all_workspaces-mac-linux"><code>visible_on_all_workspaces</code></a>, <code>new_instance</code>, <code>inject_js_start</code> and <code>inject_js_end</code> respectively in <code>package.json</code> or as argument of <code>Window.open()</code>.</li>
<li><code>--data-path</code> command line argument is replaced by <code>--user-data-dir</code>.</li>
</ul>
<h3 id="window">Window</h3>
<ul>
<li>There is an <code>id</code> to identify each window. This will be used to remember the size and position of the window and restore that geometry when a window with the same <code>id</code> is later opened. It could be specified in <a href="../../../References/Window/#windowopenurl-options-callback">Window.open</a> or <a href="../../../References/Manifest Format/#id"><code>id</code> of window subfields in manifest</a></li>
<li>Event <a href="../../../References/Window/#event-capturepagedone"><code>capturepagedone</code></a> of <code>Window</code> API is <strong>deprecated</strong>.Use the callback with the <a href="../../../References/Window/#wincapturepagecallback-config"><code>win.capturePage(callback [, config ])</code></a> instead.</li>
<li><a href="../../../References/Window/#windowopenurl-options-callback">Window.open</a> is changed to passing the created window as the argument of the callback.</li>
<li><a href="../../../References/Window/#winshowdevtoolsiframe-callback">Window.showDevtools</a> is changed to passing the created window as the argument of the callback.</li>
<li><a href="../../../References/Window/#winsettransparenttransparent">win.setTransparent</a> is <strong>deprecated</strong>. You can&rsquo;t change the transparency after window is created.</li>
<li><code>unmaximize</code> and <a href="../../../References/Window/#event-leave-fullscreen"><code>leave-fullscreen</code></a> events of <code>Window</code> object is <strong>deprecated</strong> and replaced by <a href="../../../References/Window/#event-restore">restore</a>. When window is restored from minimized, maximized or fullscreen, <code>restore</code> event is triggered instead.</li>
<li>Window options <code>always-on-top</code> and <code>visible-on-all-workspaces</code> is renamed to <a href="../../../References/Manifest Format/#always_on_top"><code>always_on_top</code></a> and <a href="../../../References/Manifest Format/#visible_on_all_workspaces-mac-linux"><code>visible_on_all_workspaces</code></a> respectively in <code>package.json</code> or as argument of <code>Window.open()</code>.</li>
<li>Window is not inherited from <code>EventEmitter</code> anymore, but the methods <code>on()</code>, <code>once()</code>, <code>removeListener()</code> and <code>removeAllListeners()</code> are still supported.</li>
</ul>
<h3 id="screen">Screen</h3>
<ul>
<li>The <code>id</code> obtained by <code>added</code>, <code>orderchanged</code>, <code>namechanged</code>, <code>thumbnailchanged</code> should be registered and use the stream id returned by <a href="../../../References/Screen/#screendesktopcapturemonitorregisterstreamid"><code>registerStream(id)</code></a> before passing to <code>getUserMedia</code>. See <a href="../../../References/Screen/#synopsis_1">Synopsis</a> for the usage.</li>
</ul>
<h3 id="known-issues">Known issues</h3>
<ul>
<li>The following window options passed to <code>nw.Window.open()</code> is not effective on <strong>Linux</strong>: <code>resizable</code> for now; try to set them in the callback.</li>
<li><code>reloadDev()</code> and <code>isDevToolsOpen()</code> of <code>nw.Window</code> are not supported for now</li>
<li><code>closed</code> event of <code>nw.Window</code>: <code>App.quit()</code> doesn&rsquo;t trigger this event.</li>
<li><code>devtools-closed</code> event of <code>nw.Window</code> is not supported for now.</li>
<li><code>as_desktop</code> option is not supported for now</li>
<li><code>webkit.{plugin|java|page-cache}</code> option in <code>package.json</code> is not supported for now: plugins are enabled by default.</li>
<li><code>nwUserAgent</code> attribute of <code>&lt;iframe&gt;</code> is not supported for now.</li>
<li><code>tooltip</code> of <code>MenuItem</code> is not supported for now.</li>
<li><code>nw.App.setCrashDumpDir()</code> is not supported; crash dump is stored in <code>app-data-path/Crash Reports</code></li>
</ul>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../../Advanced/Build Flavors/" class="btn btn-neutral float-right" title="编译特性">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../../FAQ/" class="btn btn-neutral" title="FAQ"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
      <p>NW.js中文文档由<a href="https://liuxp.me">刘小平</a>提供，项目托管在<a href="https://github.com/lxp135/NW.jsCnDocs">GitHub</a>，欢迎您参与翻译。<script language="javascript" type="text/javascript" src="https://js.users.51.la/18564708.js"></script></p>
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
      
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
          <a href="https://github.com/lxp135/NW.jsCnDocs/" class="fa fa-github" style="float: left; color: #fcfcfc"> GitHub</a>
      
      
        <span><a href="../../FAQ/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../../Advanced/Build Flavors/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>
    <script>var base_url = '../../..';</script>
    <script src="../../../js/theme.js" defer></script>
      <script src="../../../search/main.js" defer></script>

</body>
</html>
